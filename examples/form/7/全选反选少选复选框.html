<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>全选反选复选框</title>
	<link rel="stylesheet" type="text/css" href="styles/basic.css">
</head>
<body>
	<div class="form">
		<h5><input type="checkbox" id="all"><label>全选</label></h5>
		<p><input type="checkbox" name="item"><label>选项(1)</label></p>
		<p><input type="checkbox" name="item"><label>选项(2)</label></p>
		<p><input type="checkbox" name="item"><label>选项(3)</label></p>
		<p><input type="checkbox" name="item"><label>选项(4)</label></p>
		<p><input type="checkbox" name="item"><label>选项(5)</label></p>
		<p><input type="checkbox" name="item"><label>选项(6)</label></p>
		<p><input type="checkbox" name="item"><label>选项(7)</label></p>
		<p><input type="checkbox" name="item"><label>选项(8)</label></p>
		<p><input type="checkbox" name="item"><label>选项(9)</label></p>
	</div>
	<script type="text/javascript">
	(function(){
		var all=document.getElementById("all");
		var check=document.getElementsByTagName("input");
		var len=check.length-1;
		all.onclick=function(){
			choose(this.checked);
		}
		function each(arr,callback){
			var len=arr.length;
			for(var i=1;i<len;i++){
				if(callback.call(arr[i],i,arr[i])===false){
					break;
				}
			}
			return arr;
		}
		function choose(t){
			each(check,function(i){
				check[i].checked=t;
			})
		}
		each(check,function(i){
			check[i].onclick=function(){
				if(!this.checked){
					all.checked=false;
				}
				if(checkLen()==len){
					all.checked=true;
				}else{
					all.checked=false;
				}
			}
		});
		function checkLen(){
			var n=0;
			each(check,function(i){
				if(this.checked){
					n++;
				}
			});
			return n;
		}
	}());


	</script>
</body>
</html>